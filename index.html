<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Lettered App - The Digital Yard</title>
        <meta name="description" content="Part digital yard, part legacy archive, part private network." />
        <link rel="icon" href="images/letteredlogo32x32.png" sizes="32x32" />

       <style>

        /* Container and Layout */
        .container{max-width:1200px;margin:0 auto;padding:16px}
        @media (max-width:768px){.container{padding:20px}}
        @media (max-width:480px){.container{padding:16px}}
        @media (max-width:375px){.container{padding:12px}}
        @media (max-width:320px){.container{padding:10px}}
        
        /* Header */
        header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;padding:18px 0}
        @media (max-width:768px){header{padding:12px 0}}
        @media (max-width:480px){header{padding:8px 0;gap:12px}}
        @media (max-width:375px){header{padding:6px 0;gap:8px}}
        
        .brand{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
        @media (max-width:480px){.brand{width:100%;justify-content:flex-start;gap:8px}}
        @media (max-width:375px){.brand{gap:6px}}
        
        .logo-img{max-width:48px;height:auto;border-radius:8px}
        @media (max-width:480px){.logo-img{max-width:40px}}
        @media (max-width:375px){.logo-img{max-width:32px}}
        @media (max-width:320px){.logo-img{max-width:28px}}
        
        /* nav{display:flex;
            gap:12px;
            flex-wrap:wrap;
            align-items:center
        } */

        nav {
        display: flex;
        justify-content: center;
        gap: 1rem;
        padding: 1rem;
        /* background: #f5f5f5;
        border-bottom: 1px solid #ddd; */
        }

        nav button {
        padding: 0.5rem 1rem;
        border: none;
        /* background: #007bff;
        color: white; */
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.3s ease;
        color: rgb(151, 0, 0);
        }

        /* nav button:hover {
        /* background: #0056b3; 
        } */


        @media (max-width:768px){nav{gap:8px}}
        @media (max-width:480px){nav{width:100%;justify-content:space-between;gap:6px}}
        @media (max-width:375px){nav{gap:4px}}
        @media (max-width:320px){nav{flex-direction:column;align-items:stretch;gap:6px}}

        /* Desktop navigation */
        .desktop-nav {
        display: flex;
        gap: 12px;
        align-items: center;
        }
        
        /* Mobile navigation */
        .mobile-nav {
        display: none;
        position: relative;
        }
        
        @media (max-width: 768px) {
        .desktop-nav {
            display: none;
        }
        
        .mobile-nav {
            display: block;
        }
        }

        /* Hide/Show Elements */
        @media (max-width:768px){
        .hide-mobile{display:none}
        .show-mobile{display:block}
        
        /* Mobile navigation */
        .mobile-nav {
            position: relative;
        }
        
        .mobile-menu-dropdown {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            width: 200px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: 0 8px 24px var(--shadow);
            padding: 16px;
            flex-direction: column;
            align-items: stretch;
            gap: 12px;
            z-index: 100;
            animation: slideDown 0.3s ease-out;
        }
        
        .mobile-nav.mobile-open .mobile-menu-dropdown {
            display: flex;
        }
        
        .mobile-menu-dropdown .btn {
            width: 100%;
            justify-content: center;
        }
        
        @keyframes slideDown {
            from {
            opacity: 0;
            transform: translateY(-10px);
            }
            to {
            opacity: 1;
            transform: translateY(0);
            }
        }
        }

        @media (max-width: 480px) {
        .mobile-menu-dropdown {
            width: 180px;
            padding: 12px;
            gap: 8px;
            top: calc(100% + 6px);
        }
        }

        @media (max-width: 375px) {
        .mobile-menu-dropdown {
            width: 160px;
            padding: 10px;
            gap: 6px;
            top: calc(100% + 4px);
        }
        }
        
        @media (min-width:769px){
        .show-mobile{display:none}
        }
    
        /* Footer */
        footer{padding:32px 0; color:white; font-size: x-small;}
        @media (max-width:768px){footer{padding:24px 0}}
        @media (max-width:480px){footer{padding:20px 0}}
        
        .footer-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
        @media (max-width:768px){.footer-content{gap:8px}}
        @media (max-width:480px){.footer-content{flex-direction:column;align-items:center;text-align:center;gap:16px}}
        @media (max-width:375px){.footer-content{gap:12px}}
        
        .footer-links{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
        @media (max-width:768px){.footer-links{gap:8px}}
        @media (max-width:480px){.footer-links{width:100%;justify-content:center;gap:12px}}
        @media (max-width:375px){.footer-links{gap:8px}}
        
        /* Sections */
        section{padding:48px 0;border-top:1px solid var(--border)}
        @media (max-width:768px){section{padding:32px 0}}
        @media (max-width:480px){section{padding:24px 0}}

        @font-face {
            font-family: 'Lalezar Font';
            src: url('fonts/Lalezar-Regular.ttf') format('ttf');
            font-weight: normal;
            font-style: normal;
        }
        body{
            /* background-color: #F0E7DA; */
            height: 100%; 
            margin: 0; /* Removes default body margin  */
            /* background-image: linear-gradient(to bottom, rgb(17, 18, 13) 70%,  #565449);
            /* background-image: url(images/2025-09-29T165204.932.jpeg), url(images/22d78027ab249cbfff08f060638774c6.png);  */
            background-image: url(images/Background\ Overlay\ 10px.webp);
            background-position: center;
            background-repeat: no-repeat;
            background-size:cover;
        }
        header{
            /* background-color: rgb(22 24 51); */
            width: 100%;
            justify-content: center;
            align-items: center;
            margin-top: 7rem;
            margin-bottom: 7rem;
        }
        footer{
            /* background-color: rgb(22 24 51); */
            width: 100%;
        }
        * {
            font-family:  'Lalezar Font', Arial, Helvetica;
            text-transform: uppercase;
            text-align: center;
        }
        h1 {
            color:  rgb(151, 0, 0);
        }
        h2 {
            color:  rgb(22 24 51);
        }
        p {
            color:rgb(22 24 51);
        }
        a, button{
            text-decoration: none;
            color: #F0E7DA;
            background-color: transparent;
        }
        input, select{
            background-color: white;
            padding: 1.5% 1% 1.5% 1%;
            margin: 1% 3% 1% 0%;
            /* border-width: 2px; */
            border-color:  #F0E7DA;
            border-style: none;
        }
        input[type ="text"]{
            background-color: white;
            padding: 1.5% 1% 1.5% 1%;
            margin: 1% 3% 1% 0%;
            border-color:  #F0E7DA;
            border-style: none;
        }
        input:focus{
            background-color: transparent;
            padding: 1.5% 1% 1.5% 1%;
            margin: 1% 3% 1% 0%;
            /* border-width: 2px; */
            border-color: rgb(151, 0, 0);
            border-style: none;
            color: black;
        }

        #backgroundVideo{
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            max-height: 70%;
            opacity: 5%;
            z-index: 1;
            background-blend-mode: luminosity;
        }
        main{
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            /* background-color: #F0E7DA; */
            opacity: 1;
            transition: opacity 0.3s ease;
            margin-bottom: 10rem;
        }
        /* Hidden state */
        main.fade-out {
        opacity: 0;
        }

        #content{
            border: 10px;
            border-radius: 7px;
            border-color:#F0E7DA;
            background-color: #F0E7DA;
        }

       </style>

       <script>

        // Handle form submission
        async function handleFormSubmit(event) {
            event.preventDefault();
            
            const form = event.target;
            const emailInput = form.querySelector('input[type="email"]');
            const honeypotInput = form.querySelector('input[name="website"]');
            const successMessage = form.parentNode.querySelector('.success-message');
            
            // Check honeypot field (if filled, likely a bot)
            if (honeypotInput && honeypotInput.value) {
                console.log('Bot detected via honeypot');
                return;
            }
            
            const email = emailInput.value;
            
            // Input sanitization
            const sanitizedEmail = email.trim().toLowerCase();
            
            // Basic email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(sanitizedEmail)) {
                alert('Please enter a valid email address');
                return;
            }

            // Rate limiting (basic client-side)
            const lastSubmission = localStorage.getItem('lastEmailSubmission');
            const now = Date.now();
            if (lastSubmission && (now - parseInt(lastSubmission)) < 60000) { // 1 minute cooldown
                alert('Please wait a moment before submitting again');
                return;
            }
            
            if (sanitizedEmail) {
                // Track the signup
                trackSignup();
                
                // Store submission time for rate limiting
                localStorage.setItem('lastEmailSubmission', now.toString());
                
                // Submit to secure backend
                const result = await submitEmailSecurely(sanitizedEmail, honeypotInput?.value || '');
                
                if (result.success) {
                // Show success message
                successMessage.style.display = 'block';
                form.style.display = 'none';
                } else {
                // Show error message
                alert(result.error || 'Failed to submit email. Please try again.');
                }
            }
            }

            // Secure email submission function
            async function submitEmailSecurely(email, website = '') {
            try {
                // Determine API URL based on environment
                const apiUrl = config.isGitHubPages ? config.apiBaseUrl : config.fallbackApiUrl;
                
                // First, get CSRF token from server
                const tokenResponse = await fetch(`${apiUrl}/api/csrf-token`, {
                method: 'GET',
                credentials: 'include'
                });
                
                if (!tokenResponse.ok) {
                throw new Error('Failed to get CSRF token');
                }
                
                const { csrfToken } = await tokenResponse.json();
                
                // Submit email with CSRF protection
                const response = await fetch(`${apiUrl}/api/beta-signup`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-Token': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                credentials: 'include',
                body: JSON.stringify({ 
                    email: email,
                    website: website // Honeypot field
                })
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                console.log('Email submitted successfully');
                return { success: true, message: result.message };
                } else {
                throw new Error(result.error || 'Submission failed');
                }
            } catch (error) {
                console.error('Error submitting email:', error);
            }}
            // Handle email input with real-time validation
            function handleEmailInput(input) {
            const email = input.value;
            formData.email = email;
            
            const validationMessage = input.parentNode.querySelector('.email-validation-message');
            
            if (!email) {
                validationMessage.style.display = 'none';
                input.style.borderColor = 'var(--border)';
                return;
            }
            
            if (validateEmail(email)) {
                validationMessage.textContent = '✅ Valid email address';
                validationMessage.style.color = 'var(--success)';
                validationMessage.style.display = 'block';
                input.style.borderColor = 'var(--success)';
            } else {
                validationMessage.textContent = '❌ Please enter a valid email address';
                validationMessage.style.color = '#dc2626';
                validationMessage.style.display = 'block';
                input.style.borderColor = '#dc2626';
            }
            }

            // Email validation function
            function validateEmail(email) {
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return emailRegex.test(email);
            }

            // Responsive navigation for mobile
            function toggleMobileNav() {
            const mobileNav = document.querySelector('.mobile-nav');
            const menuBtn = document.querySelector('.mobile-nav .btn');
            
            mobileNav.classList.toggle('mobile-open');
            
            // Update button text
            if (mobileNav.classList.contains('mobile-open')) {
                menuBtn.textContent = 'Close';
            } else {
                menuBtn.textContent = 'Menu';
            }
            }
            
            // Close mobile nav when clicking outside
            document.addEventListener('click', function(event) {
            const mobileNav = document.querySelector('.mobile-nav');
            const menuBtn = document.querySelector('.mobile-nav .btn');
            
            if (mobileNav.classList.contains('mobile-open') && 
                !mobileNav.contains(event.target) && 
                !menuBtn.contains(event.target)) {
                mobileNav.classList.remove('mobile-open');
                menuBtn.textContent = 'Menu';
            }
            });

            // Close mobile nav when clicking on a nav link
            document.addEventListener('click', function(event) {
            if (event.target.closest('nav a')) {
                const mobileNav = document.querySelector('.mobile-nav');
                const menuBtn = document.querySelector('.mobile-nav .btn');
                
                mobileNav.classList.remove('mobile-open');
                menuBtn.textContent = 'Menu';
            }
            });
            
            // Dynamic Section Container
            const sections = {
            about: `
                    <nav>
                    <div class="desktop-nav">
                        <!-- <a href="#about" class="btn">About</a>
                        <a href="#access" class="btn">Access</a>
                        <a href="#faqs" class="btn">FAQs</a> -->
                        <button onclick="showSection('about')">About</button>
                        <button onclick="showSection('access')">Access</button>
                        <button onclick="showSection('faq')">FAQs</button>
                    </div>
                    <div class="mobile-nav">
                        <button class="btn" onclick="toggleMobileNav()">Menu</button>
                        <!-- Mobile dropdown menu -->
                        <div class="mobile-menu-dropdown">
                            <button onclick="showSection('about')">About</button>
                            <button onclick="showSection('access')">Access</button>
                            <button onclick="showSection('faq')">FAQs</button>
                        </div>
                    </div>
                    </nav>
                    <br>
                    <h1>About</h1>
                    <p style="font-style: italic;"> Part digital yard, part legacy archive, part private social network. A culturally vibrant, trusted space where members of the D9 can represent, organize, reminisce, and flex their history and culture.</p>
            `,
            access: `
                <nav>
                    <div class="desktop-nav">
                        <!-- <a href="#about" class="btn">About</a>
                        <a href="#access" class="btn">Access</a>
                        <a href="#faqs" class="btn">FAQs</a> -->
                        <button onclick="showSection('about')">About</button>
                        <button onclick="showSection('access')">Access</button>
                        <button onclick="showSection('faq')">FAQs</button>
                    </div>
                    <div class="mobile-nav">
                        <button class="btn" onclick="toggleMobileNav()">Menu</button>
                        <!-- Mobile dropdown menu -->
                        <div class="mobile-menu-dropdown">
                            <button onclick="showSection('about')">About</button>
                            <button onclick="showSection('access')">Access</button>
                            <button onclick="showSection('faq')">FAQs</button>
                        </div>
                    </div>
                </nav>
                    <br>
                    <h1>Gain Access</h1>

                        <!-- Verification Form -->
                        <div class="form">
                            <form>
                                <label for="fname">First Name:</label>
                                <input type="text" id="fname" name="fname" required autofocus>
                                <br>
                                <label for="lname">Last Name:</label>
                                <input type="text" id="lname" name="lname" required>
                                <br>
                                <label for="email">Email:</label>
                                <input type="email" id="email" name="email" onchange="handleTextInput('email', this.value)"
                                oninput="handleEmailInput(this)" placeholder="your@email.com" required>
                                <br>

                                <label for="lineName">Line Name:</label>
                                <input type="text" id="lineName" name="lineName" required>
                                <br>
                                <label for="lineNumber">Line Number:</label>
                                <input type="number" id="lineNumber" name="lineNumber" min="1" max="500" pattern="[0-9]{1,3}" maxlength="3" required>

                                <br>
                                <hr>

                                <label for="orgs">Organization:</label>
                                <select id="orgs" name="orgs" required>
                                    <option value="alpha">Alpha Phi Alpha Fraternity, Inc.</option>
                                    <option value="aka">Alpha Kappa Alpha Sorority, Inc.</option>
                                    <option value="kappa">Kappa Alpha Psi Fraternity, Inc.</option>
                                    <option value="que">Omega Psi Phi Fraternity, Inc.</option>
                                    <option value="delta">Delta Sigma Theta Sorority, Inc.</option>
                                    <option value="sigma">Phi Beta Sigma Fraternity, Inc.</option>
                                    <option value="sgrho">Sigma Gamma Rho Sorority, Inc.</option>
                                    <option value="zeta">Zeta Phi Beta Sorority, Inc.</option>
                                    <option value="iota">Iota Phi Theta Fraternity, Inc.</option>
                                </select>
                                <br>
                                <label for="orgs">Chapter Name:</label>
                                <input type="text" id="chapName" name="chapName" required>
                                <br>
                                <label for="orgs">City Chapter Located:</label>
                                <input type="text" id="city" name="city" required autocomplete="address-level2">
                                <br>
                                <label for="orgs">University Chapter Located:</label>
                                <input type="text" id="university" name="university" required autocomplete="on">

                                <br><hr>

                                <label for="smedia1">Social Media:</label>
                                <input type="url" id="smedia1" name="smedia1" placeholder="Instagram" size="10">
                                <input type="url" id="smedia2" name="smedia2" placeholder="TikTok" size="10">
                                <input type="url" id="smedia3" name="smedia3" placeholder="Facebook" size="10">  
                                <input type="url" id="usmedia4" name="smedia4" placeholder="Twitter" size="10">

                                <br>

                                <label for="pariImage">Picture in Pari:</label>
                                <input type="file" id="pariImage" name="pariImage" width="75" height="75">

                                <br>

                                <input type="submit" value="Submit">
                            </form>
                            <p style="font-style: italic; font-size: 11px; margin-top: 20px;">Submitting social links and/or a picture wearing pari speeds up verification.</p>
            `,
            faq: `
                <nav>
                    <div class="desktop-nav">
                        <!-- <a href="#about" class="btn">About</a>
                        <a href="#access" class="btn">Access</a>
                        <a href="#faqs" class="btn">FAQs</a> -->
                        <button onclick="showSection('about')">About</button>
                        <button onclick="showSection('access')">Access</button>
                        <button onclick="showSection('faq')">FAQs</button>
                    </div>
                    <div class="mobile-nav">
                        <button class="btn" onclick="toggleMobileNav()">Menu</button>
                        <!-- Mobile dropdown menu -->
                        <div class="mobile-menu-dropdown">
                            <button onclick="showSection('about')">About</button>
                            <button onclick="showSection('access')">Access</button>
                            <button onclick="showSection('faq')">FAQs</button>
                        </div>
                    </div>
                </nav>
                    <br>
                <h1>FAQs</h1>
                    <div>
                        <h2>How long is verification?</h2>
                        <p>Verification can take up to 2-3 days.</p>
                        <h2>Is this affiliated with Watch The Yard?</h2>
                        <p>No. Lettered is not affiliated with Watch The Yard or any of the Official D9 organizations</p>
                        <h2>Does it cost?</h2>
                        <p>No</p>
                        <h2>What happens after verification?</h2>
                        <p>Verified member will recieve an email with steps to access the app</p>
                    </div>
            `
            };

            function showSection(section) {
            const content = document.getElementById('content');
            // Add fade-out class
            content.classList.add('fade-out');

            // After fade-out completes, swap content
            setTimeout(() => {
                content.innerHTML = sections[section];
                // Remove fade-out (which triggers fade-in automatically)
                content.classList.remove('fade-out');
            }, 500); // match CSS transition duration
            }
       </script>
    </head>

    <body>
        <div class="container">
            <header>
                <img style="size: 100px;" src="images/letteredvelocityfont.png" alt="Lettered Logo" class="logo-img">
            </header>

            <main id="content">
                <nav>
                    <div class="desktop-nav">
                        <!-- <a href="#about" class="btn">About</a>
                        <a href="#access" class="btn">Access</a>
                        <a href="#faqs" class="btn">FAQs</a> -->
                        <button onclick="showSection('about')">About</button>
                        <button onclick="showSection('access')">Access</button>
                        <button onclick="showSection('faq')">FAQs</button>
                    </div>
                    <div class="mobile-nav">
                        <button class="btn" onclick="toggleMobileNav()">Menu</button>
                        <!-- Mobile dropdown menu -->
                        <div class="mobile-menu-dropdown">
                            <button onclick="showSection('about')">About</button>
                            <button onclick="showSection('access')">Access</button>
                            <button onclick="showSection('faq')">FAQs</button>
                        </div>
                    </div>
                    </nav>
                <h1>Welcome to Lettered</h1>
                <p>Trusted space for the divine nine</p>
            </main>

            <footer>
                <div class="footer-content">
                    <div class="footerSmall">letteredapp@gmail.com</div>
                    <div class="footer-links">
                        <a href="/privacy.html" class="small">Privacy</a>
                        <a href="/terms.html" class="small">Terms</a>
                    </div>

                    <div class="footerSmall">&copy; 2025 Lettered. All Rights Reserved.</div>
                </div>
              </footer>

        </div>
    </body>
</html>
